import React from "react";
import {Card} from "antd";
import {RootState} from "../reducers";
import {useDispatch, useSelector} from "react-redux";
import PrintQueueCard from "../components/PrintQueueCard";
import * as actions from "../actions";
import {PrintQueue} from "../models";


function ConfigQueuesPage({}) {

	const dispatch = useDispatch();
	dispatch(actions.fetchQueuesIfNeeded());
	dispatch(actions.fetchDestinationsIfNeeded());

	const queues = useSelector((state: RootState) => state.queues.items);
	const destinations = useSelector((state: RootState) => state.destinations.items);

	if (queues && Object.keys(queues).length >0) {
		return <>
			{Object.values(queues).map((q: PrintQueue)=> {
				// @ts-ignore look maybe you can sort out how to get that autogenerated component to spit out the right interface
				return <PrintQueueCard key={q._id} printQueue={q} destinations={destinations}/>})}

			</>
	}
	return <Card>:(</Card>
}

export default ConfigQueuesPage